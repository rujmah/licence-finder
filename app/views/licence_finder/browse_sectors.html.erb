<%= javascript_include_tag 'licence-finder', defer: true %>

<div class="article-container">
  <article class="results">
    <div class="inner group">
      <h2>Browse sectors</h2>

      <% if @sectors.empty? %>
        <p>No sectors</p>
      <% else %>
         <ul class="sector-navigation">
           <% @sectors.each do |sector| %>
             <li>
               <% if (@current_sector && sector.public_id == @current_sector.public_id) || (@parent_sector && sector.public_id == @parent_sector.public_id) %>
                 <%= sector.name %>
                 <% if !@child_sectors.empty? %>
                   <ul class="sector-navigation">
                     <% @child_sectors.each do |c_sector| %>
                       <li>
                         <% if (@current_sector && c_sector.public_id == @current_sector.public_id) || (@parent_sector && c_sector.public_id == @parent_sector.public_id) %>
                           <%= c_sector.name %>
                           <% if !@grandchild_sectors.empty? %>
                             <ul class="sector-navigation">
                               <% @grandchild_sectors.each do |g_sector| %>
                                 <li><%= g_sector.name %></li>
                               <% end %>
                             </ul>
                           <% end %>
                         <% else %>
                           <%= link_to c_sector.name, browse_sector_child_path(:sector_parent => sector.public_id, :sector => c_sector.public_id) %>
                         <% end %>
                       </li>
                     <% end %>
                   </ul>
                 <% end %>
               <% else %>
                 <%= link_to sector.name, browse_sector_path(:sector => sector.public_id) %>
               <% end %>
             </li>
           <% end %>
         </ul>
      <% end %>
    </div>
  </article>
</div>
